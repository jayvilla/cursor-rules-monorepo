---
description: PostgreSQL and TypeORM migrations and safety rules.
globs: ["**/*.entity.ts", "**/migrations/*.ts"]
---
# Database Safety (2025)

- **Migrations:** Never use `synchronize: true` for anything beyond local dev. 
- **Generation:** Use `pnpm nx run <project>:migration:generate --name=<name>`.
- **Type Safety:** Always define explicit relations (`@ManyToOne`, `@OneToMany`) with `{ nullable: false }` where applicable.
- **Postgres:** Use indexed columns for high-traffic queries. Always sanitize inputs via TypeORM parameters to prevent SQL injection.
